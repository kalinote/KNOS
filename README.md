> README由AI生成

# KNOS 操作系统

KNOS是一个从零开始构建的64位多进程图形操作系统。项目旨在实现一个完整的操作系统内核，包括启动引导、内存管理、进程调度、图形界面等核心功能。

## 项目概述

KNOS是一个基于x86_64架构的操作系统内核实现，主要特性包括：

- 64位内核架构设计
- 传统BIOS引导支持（后续计划支持UEFI）
- 基于APIC的多处理器支持
- 使用2MB大页的内存分页管理
- 图形界面支持（基于VBE，后续计划支持Intel HD Graphics）
- 多进程任务管理
- 基本设备驱动支持

## 系统架构

### 硬件支持

- **处理器:** x86_64 (Intel 64位模式)
- **内存管理:** 64位分页与大页(2MB)支持
- **多处理器:** 基于APIC的SMP多核支持
- **图形:** VBE图形模式（未来支持Intel HD Graphics）
- **设备:** 键盘、硬盘等基础设备

### 软件架构

KNOS采用分层设计：

1. **引导层** - bootloader/
   - boot.asm: 第一阶段引导程序
   - loader.asm: 第二阶段加载器，负责模式切换和内核加载

2. **内核层** - kernel/
   - 内存管理子系统（memory.c/memory.h）
   - 中断与异常处理（idt.c/trap.c）
   - 全局描述符表管理（gdt.c）
   - 显示与图形子系统（vbe.c）
   - 内核调试与日志系统（printk.c）

## 当前功能

- ✅ 16位实模式 → 32位保护模式 → 64位长模式引导过程
- ✅ 基于E820的物理内存检测与管理
- ✅ 页式内存管理及内存分配器
- ✅ 全局/中断描述符表(GDT/IDT)设置
- ✅ 基本异常与中断处理
- ✅ VBE图形模式初始化
- ✅ 内核调试输出系统

## 构建与运行

### 构建依赖

- NASM汇编器
- GCC/G++交叉编译工具链(x86_64-elf目标)
- Python3 (用于FAT12镜像工具)
- Bochs或VMware虚拟机（用于测试）

### 构建步骤

1. 确保您已安装所有依赖项
2. 在项目根目录执行：

```bash
make
```

这将生成可引导软盘镜像 `KNOS.vfd`

### 运行测试

使用Bochs:
```bash
bochs -f bochsrc.bxrc
```

或使用VMware/物理机加载生成的镜像文件。

## 项目结构

- **bootloader/** - 引导加载器代码
- **kernel/** - 内核核心代码
- **tools/** - 辅助工具和脚本
- **kal/** - 内核模块及应用程序文件
- **bin/** - 编译产物临时目录

## 开发计划

- [ ] UEFI引导支持
- [ ] 进程调度系统
- [ ] 完整文件系统支持
- [ ] Intel HD Graphics驱动支持
- [ ] 用户态应用与库
- [ ] USB与PCIe设备支持

## 许可证

请查看项目中的LICENSE文件。 